<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.layout.BorderPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.Priority?>
<?import javafx.scene.layout.Region?>
<?import javafx.scene.layout.StackPane?>
<?import javafx.scene.layout.VBox?>
<?import javafx.scene.shape.Circle?>

<BorderPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.spark.platform.controllers.AppShellController"
            stylesheets="@../css/app-shell.css"
            styleClass="app-root">

    <!-- ═══════════ SIDEBAR (shared across all modules) ═══════════ -->
    <left>
        <VBox styleClass="sidebar" spacing="18">
            <padding>
                <Insets top="28" right="18" bottom="28" left="18" />
            </padding>

            <!-- Logo -->
            <HBox styleClass="logo-row" spacing="10">
                <StackPane styleClass="logo-badge">
                    <Circle radius="14" styleClass="logo-dot" />
                </StackPane>
                <VBox spacing="2">
                    <Label text="Spark" styleClass="logo-title" />
                    <Label text="Academic Studio" styleClass="logo-subtitle" />
                </VBox>
            </HBox>

            <!-- Core navigation -->
            <VBox spacing="8">
                <Label text="Core" styleClass="nav-section" />
                <VBox fx:id="navGroupCore" styleClass="nav-group" spacing="6">
                    <Button fx:id="navDashboard"   text="Dashboard"   styleClass="nav-item,active" onAction="#onNavClick" />
                    <Button fx:id="navClassroom"    text="Classroom"   styleClass="nav-item"        onAction="#onNavClick" />
                    <Button fx:id="navGrades"       text="Grades"      styleClass="nav-item"        onAction="#onNavClick" />
                    <Button fx:id="navScheduler"    text="Scheduler"   styleClass="nav-item"        onAction="#onNavClick" />
                </VBox>
            </VBox>

            <!-- Labs navigation -->
            <VBox spacing="8">
                <Label text="Labs" styleClass="nav-section" />
                <VBox fx:id="navGroupLabs" styleClass="nav-group" spacing="6">
                    <Button fx:id="navSparkyAI"     text="Sparky AI"      styleClass="nav-item" onAction="#onNavClick" />
                    <Button fx:id="navProjectBoard" text="Project Board"  styleClass="nav-item" onAction="#onNavClick" />
                    <Button fx:id="navOpportunities" text="Opportunities" styleClass="nav-item" onAction="#onNavClick" />
                </VBox>
            </VBox>

            <!-- Spacer pushes footer to bottom -->
            <Region styleClass="nav-spacer" VBox.vgrow="ALWAYS" />

            <!-- Footer -->
            <VBox spacing="10" styleClass="sidebar-footer">
                <Label text="Spring 2026" styleClass="footer-label" />
                <Label text="Smart Academic Management" styleClass="footer-tag" />
            </VBox>
        </VBox>
    </left>

    <!-- ═══════════ TOP BAR (page title + profile) ═══════════ -->
    <top>
        <HBox styleClass="topbar" spacing="18">
            <padding>
                <Insets top="16" right="28" bottom="16" left="28" />
            </padding>

            <VBox spacing="2">
                <Label fx:id="pageTitle"    text="Dashboard"            styleClass="page-title" />
                <Label fx:id="pageSubtitle" text="Your academic cockpit" styleClass="page-subtitle" />
            </VBox>

            <Region HBox.hgrow="ALWAYS" />

            <HBox spacing="12" styleClass="profile-chip">
                <StackPane styleClass="avatar">
                    <Circle radius="14" styleClass="avatar-ring" />
                    <Circle radius="10" styleClass="avatar-core" />
                </StackPane>
                <VBox spacing="1">
                    <Label text="I. Grassi" styleClass="profile-name" />
                    <Label text="Student" styleClass="profile-role" />
                </VBox>
            </HBox>
        </HBox>
    </top>

    <!-- ═══════════ CENTER OUTLET (each dev loads their module here) ═══════════ -->
    <center>
        <StackPane fx:id="contentOutlet" styleClass="content-shell">
            <!-- Default welcome content — replaced at runtime by each module's FXML -->
            <Region prefWidth="420" prefHeight="420" styleClass="ambient-orb" StackPane.alignment="TOP_RIGHT" />
            <VBox styleClass="content-card" spacing="12" maxWidth="760" StackPane.alignment="CENTER">
                <Label text="Welcome to Spark" styleClass="card-title" />
                <Label text="This shared shell keeps navigation consistent. Each module view loads into this outlet area."
                       styleClass="card-body" wrapText="true" />
                <HBox spacing="10">
                    <Label text="Shared layout" styleClass="pill" />
                    <Label text="Comfortable focus" styleClass="pill" />
                    <Label text="Ready for your module" styleClass="pill" />
                </HBox>
            </VBox>
        </StackPane>
    </center>

</BorderPane>
